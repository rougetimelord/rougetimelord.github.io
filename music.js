var song=function(){function r(a){_=this;_.request=new XMLHttpRequest;_.request.open("GET",a,!0);_.request.responseType="arraybuffer";_.request.onload=function(){console.log(a,_.request.response);b.decodeAudioData(_.request.response,function(a){this.source=b.createBufferSource();this.source.connect(e);this.source.connect(b.destination);this.source.buffer=a;sources.push(this.source);l&&(l=!1,m(this.source));sources.length<f.length&&(g++,g<f.length||(g=0),n(g))})};_.request.send()}function m(a){this.duration=
Math.floor(1E3*a.duration);this.source=b.createBufferSource();this.source.connect(e);this.source.connect(b.destination);this.source.buffer=a;source.start(0);setTimeout(p,this.duration)}window.AudioContext||(window.webkitAudioContext||alert("No audiocontext found"),window.AudioContext=window.webkitAudioContext);var b=new AudioContext,e,h,k=0,f=["never-met","still-high","dark","fuck-boy"],q=[],t=[],p=function(){for(var a=-1;a!==k&&0>=a;)a=Math.floor(Math.random()*f.length);k=a;song_name=f[k];if(-1==
q.indexOf(song_name))n(c);else{var c=q.indexOf(song_name);new m(t[c])}},g,n=function(a){url="./Content/"+f[a]+".mp3";g=a;new r(url)};h=b.createScriptProcessor(2048,1,1);h.connect(b.destination);e=b.createAnalyser();e.smoothingTimeConstant=.3;e.fftSize=1024;e.connect(h);p();var l=!0;h.onaudioprocess=function(){var a=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(a);for(var c=0,d=a.length,b=0;b<d;b++)c+=a[b];a=c/d;c=document.getElementsByClassName("react");for(d=0;d<c.length;d++)c[d].classList.remove("light");
if(70<=a)for(d=0;d<c.length;d++)c[d].classList.add("light")}};
